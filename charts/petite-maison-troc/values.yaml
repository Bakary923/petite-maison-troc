# ============================================================
# VALUES.YAML - CONFIGURATION GLOBALE DU PROJET
# ============================================================

openshift:
  enabled: true 

secrets:
  # Valeurs par défaut (écrasées par values-secrets.yaml en local ou GitHub Secrets en CD)
  dbHost: "REDACTED"
  dbPort: "5432"
  dbUrl: "REDACTED"
  dbName: "REDACTED"
  dbUser: "REDACTED"
  dbPassword: "REDACTED"
  jwtSecret: "REDACTED"
  jwtRefreshSecret: "REDACTED"
  # ✅ AJOUT POUR LE STOCKAGE CLOUD (STATELESS)
  supabaseUrl: "REDACTED"
  supabaseKey: "REDACTED"

# --- 3. BACKEND (API) ---
backend:
  image:
    repository: ghcr.io/bakary923/petite-maison-troc/backend
    tag: latest
    pullPolicy: Always
  containerPort: 3000
  servicePort: 3000
  serviceType: ClusterIP
  url: "/api"
  
  # --- CONFIGURATION RESSOURCES (Indispensable pour le HPA) ---
  resources:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "256Mi"
  
  # --- MONTÉE EN CHARGE (Validé sans PVC) ---
  hpa:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70

# --- 4. FRONTEND (WEB) ---
frontend:
  image:
    repository: ghcr.io/bakary923/petite-maison-troc/frontend
    tag: latest
    pullPolicy: Always
  containerPort: 8080
  servicePort: 8080
  serviceType: ClusterIP
  url: "https://petite-maison-frontend-bakary-badiaga-dev.apps.rm3.7wse.p1.openshiftapps.com"
  
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "100m"
      memory: "128Mi"

# --- 5. BASE DE DONNÉES SUPABASE ---
database:
  host: "aws-1-eu-west-1.pooler.supabase.com" 
  port: 5432 
  name: "postgres"

# --- 6. STOCKAGE ---
# ❌ SECTION SUPPRIMÉE : L'application est désormais Stateless (Supabase Storage).
# Le PVC 'uploads-pvc' n'est plus requis pour le Backend.

# --- 7. INGRESS ---
ingress:
  enabled: false # Utilisation des Routes natives OpenShift