# ============================================================
# VALUES.YAML - PETITE MAISON DU TROC (MODE HYBRIDE)
# ============================================================

# --- 1. CONFIGURATION DE LA PLATEFORME ---
# Interrupteur logique : false = Minikube (Ingress), true = OpenShift (Route)
openshift:
  enabled: false

# --- 2. SECRETS & SÉCURITÉ ---
# ⚠️ Ces valeurs sont des placeholders. Les vraies valeurs sont injectées 
# via 'values-secrets.yaml' en local ou '--set' dans la CI/CD GitHub.
secrets:
  dbName: "REDACTED"
  dbUser: "REDACTED"
  dbPassword: "REDACTED"
  jwtSecret: "REDACTED"
  jwtRefreshSecret: "REDACTED"

# --- 3. BACKEND (API) ---
backend:
  image: ghcr.io/bakary923/petite-maison-troc/backend:latest
  replicaCount: 1
  containerPort: 3000
  servicePort: 3000   # Port interne du cluster
  serviceType: ClusterIP 
  pullPolicy: Always
  # URL d'accès à l'API (Sera surchargée par la Route sur OpenShift)
  url: "http://petite-maison.local/api" 

# --- 4. FRONTEND (WEB) ---
frontend:
  image: ghcr.io/bakary923/petite-maison-troc/frontend:latest
  replicaCount: 1
  containerPort: 80
  servicePort: 80     # Port standard pour Nginx
  serviceType: ClusterIP
  pullPolicy: Always
  # URL d'accès au site
  url: "http://petite-maison.local"

# --- 5. BASE DE DONNÉES (POSTGRESQL) ---
database:
  image: postgres:16-alpine
  host: "postgres"
  port: 5432
  pvcName: "postgres-pvc" # Doit correspondre au PVC créé dans le cluster
  storageSize: 1Gi
  accessMode: ReadWriteOnce

# --- 6. STOCKAGE PERSISTANT (UPLOADS) ---
storage:
  pvcName: "uploads-pvc"  # Pour conserver les images des annonces
  uploadsSize: 1Gi
  accessMode: ReadWriteOnce

# --- 7. INGRESS (Minikube / Standard K8s) ---
ingress:
  enabled: true
  className: "nginx"
  host: "petite-maison.local"