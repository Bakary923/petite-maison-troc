# ============================================================
# VALUES.YAML - PETITE MAISON DU TROC (MODE HYBRIDE)
# ============================================================

# --- 1. CONFIGURATION DE LA PLATEFORME ---
# true = OpenShift (Route), false = Minikube (Ingress)
openshift:
  enabled: true

# --- 2. SECRETS & SÉCURITÉ ---
# Injectés via --set dans la CD ou values-secrets.yaml en local
secrets:
  dbName: "REDACTED"
  dbUser: "REDACTED"
  dbPassword: "REDACTED"
  jwtSecret: "REDACTED"
  jwtRefreshSecret: "REDACTED"

# --- 3. BACKEND (API) ---
backend:
  image:
    repository: ghcr.io/bakary923/petite-maison-troc/backend
    tag: latest
  replicaCount: 1
  containerPort: 3000
  servicePort: 3000
  serviceType: ClusterIP 
  pullPolicy: Always
  url: "http://petite-maison.local/api" 

# --- 4. FRONTEND (WEB) ---
frontend:
  image:
    repository: ghcr.io/bakary923/petite-maison-troc/frontend
    tag: latest
  replicaCount: 1
  containerPort: 80
  servicePort: 80
  serviceType: ClusterIP
  pullPolicy: Always
  url: "http://petite-maison.local"

# --- 5. BASE DE DONNÉES (POSTGRESQL) ---
database:
  image: postgres:16-alpine
  host: "postgres"
  port: 5432
  pvcName: "postgres-pvc"
  storageSize: 1Gi
  accessMode: ReadWriteOnce

# --- 6. STOCKAGE PERSISTANT (UPLOADS) ---
storage:
  pvcName: "uploads-pvc"
  uploadsSize: 1Gi
  accessMode: ReadWriteOnce

# --- 7. INGRESS (Minikube / Standard K8s) ---
# Désactivé sur OpenShift car la Route prend le relais
ingress:
  enabled: false
  className: "nginx"
  host: "petite-maison.local"