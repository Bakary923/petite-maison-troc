apiVersion: v1
kind: Secret
metadata:
  # Nom du secret basÃ© sur la release Helm
  name: {{ .Release.Name }}-secrets

  # Labels standards Helm/Kubernetes
  labels:
    app.kubernetes.io/name: petite-maison
    app.kubernetes.io/instance: {{ .Release.Name }}
    managed-by: helm

type: Opaque

data:
  # --- ğŸ—„ï¸ BASE DE DONNÃ‰ES SUPABASE ---
  # Les valeurs proviennent de values-secrets.yaml
  # Elles sont encodÃ©es en base64 comme l'exige Kubernetes
  dbHost: {{ .Values.secrets.dbHost | toString | b64enc | quote }}
  dbName: {{ .Values.secrets.dbName | toString | b64enc | quote }}
  dbUser: {{ .Values.secrets.dbUser | toString | b64enc | quote }}
  dbPassword: {{ .Values.secrets.dbPassword | toString | b64enc | quote }}

  # --- ğŸ” CLÃ‰S JWT ---
  # UtilisÃ©es par le backend pour signer les tokens
  jwtSecret: {{ .Values.secrets.jwtSecret | toString | b64enc | quote }}
  jwtRefreshSecret: {{ .Values.secrets.jwtRefreshSecret | toString | b64enc | quote }}
