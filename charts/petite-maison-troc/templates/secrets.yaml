# ‚úÖ GESTION DES SECRETS (CONFORMIT√â ISO 27001)
# Ce fichier centralise toutes les donn√©es sensibles du projet.
# Elles sont inject√©es dynamiquement dans les Pods via des variables d'environnement.
apiVersion: v1
kind: Secret
metadata:
  # Nom g√©n√©r√© dynamiquement bas√© sur le nom de la release Helm
  name: {{ .Release.Name }}-secrets
  labels:
    # Suppression de l'include manquant pour √©viter l'erreur de linting
    app.kubernetes.io/name: petite-maison
    app.kubernetes.io/instance: {{ .Release.Name }}
    managed-by: helm
type: Opaque
data:
  # --- üóÑÔ∏è BASE DE DONN√âES (POSTGRESQL) ---
  # L'encodage b64enc est une exigence stricte de Kubernetes/OpenShift pour les Secrets.
  postgres-db: {{ .Values.secrets.dbName | b64enc | quote }}
  postgres-user: {{ .Values.secrets.dbUser | b64enc | quote }}
  postgres-password: {{ .Values.secrets.dbPassword | b64enc | quote }}

  # --- üîê S√âCURIT√â & AUTHENTIFICATION (JWT) ---
  # Jetons utilis√©s par le Backend pour s√©curiser les sessions utilisateurs.
  jwt-secret: {{ .Values.secrets.jwtSecret | b64enc | quote }}
  jwt-refresh-secret: {{ .Values.secrets.jwtRefreshSecret | b64enc | quote }}