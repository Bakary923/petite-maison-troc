{{- if .Values.openshift.enabled }}

apiVersion: route.openshift.io/v1
kind: Route
metadata:
  # Nom de la route (tu avais choisi ce nom, je le garde)
  name: petite-maison-frontend

  # Tes labels d’origine, conservés tels quels
  labels:
    app: petite-maison
    component: frontend

spec:
  # Le service ciblé doit être exactement le nom du Service frontend
  to:
    kind: Service
    name: {{ .Release.Name }}-frontend

  # Le port doit correspondre au port nommé dans le Service frontend
  # Ton Service frontend expose un port nommé "http"
  port:
    targetPort: http

  # HTTPS géré par OpenShift (terminaison TLS côté routeur)
  tls:
    termination: edge
    insecureEdgeTerminationPolicy: Redirect

{{- end }}
