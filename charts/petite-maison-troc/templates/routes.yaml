{{- if .Values.openshift.enabled -}}
# âœ… RESSOURCE SPÃ‰CIFIQUE OPENSHIFT : La Route
# La Route gÃ¨re automatiquement l'exposition publique, le DNS et le certificat SSL.
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  # Nom fixe pour Ã©viter la dÃ©pendance aux helpers Helm manquants
  name: petite-maison-frontend
  labels:
    app: petite-maison
    component: frontend
spec:
  # ğŸ”— LIAISON : On pointe la Route vers le Service Frontend
  to:
    kind: Service
    name: petite-maison-frontend
  
  # ğŸšª PORT : On cible le port du service (vÃ©rifie que ton service s'appelle 'http' ou change par 8080)
  port:
    targetPort: http

  # ğŸ” SÃ‰CURITÃ‰ (HTTPS) : Configuration de la terminaison TLS (ConformitÃ© DevSecOps)
  tls:
    # Mode 'edge' : Le certificat SSL est gÃ©rÃ© par le routeur OpenShift (Terminaison TLS).
    termination: edge
    
    # Redirection automatique : Force l'utilisateur Ã  passer du HTTP vers le HTTPS.
    insecureEdgeTerminationPolicy: Redirect
{{- end -}}